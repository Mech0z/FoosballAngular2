<mat-progress-bar class="loading" *ngIf="loading" mode="indeterminate"></mat-progress-bar>



<div *ngIf="leaderboards" style="max-width: 600px;">
  <div class="top-section">
    <h1 style="display: flex; align-items: center; cursor: pointer;" [matMenuTriggerFor]="menu">
      {{selectedLeaderboard?.seasonName }}<i class="material-icons">expand_more</i></h1>
    <mat-menu #menu="matMenu">
      <button mat-menu-item *ngFor="let l of leaderboards" (click)="selectedLeaderboard = l">
        {{ l.seasonName }}</button>
      <button mat-menu-item *ngIf="selectedLeaderboard && isAdmin" (click)="recalculateSeason()"
        style="font-weight: bold;">RECALCULATE
      </button>
    </mat-menu>
    <div style="margin-bottom: -8px; width: 30px;">
      <button mat-icon-button routerLink="/player-rank//{{selectedLeaderboard?.seasonName}}">
        <i class="material-icons">show_chart</i>
      </button>
    </div>
  </div>
  <div *ngIf="selectedLeaderboard?.entries.length === 0">No matches yet this season, go down and play!</div>
  <div class="player"
    [ngClass]="{'gold': i === 0 && hilightPodium, 'silver': i === 1 && hilightPodium, 'bronze': i === 2 && hilightPodium}"
    *ngFor="let leaderboardEntry of selectedLeaderboard?.entries; let i = index"
    routerLink="/player-details/{{leaderboardEntry?.userName}}">
    <div class="header">
      <p class="green">{{ i + 1 }}.</p>
      <p>{{ leaderboardEntry.eloRating }}</p>
    </div>
    <div style="display: flex; justify-content: center; align-items: center; flex-direction: column; margin-top: -8px;">
      <a>{{ leaderboardEntry.displayName }}</a>
      <p>{{ leaderboardEntry.wins }} / {{leaderboardEntry.numberOfGames}}
        ({{(leaderboardEntry.wins/leaderboardEntry.numberOfGames*100)| number : '1.2-2'}}%)</p>
    </div>
  </div>
</div>